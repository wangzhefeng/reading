.. _header-n0:

A/B test
========

.. _header-n4:

什么是A/B test？
----------------

   -  A/B test
      是一种为了提高转换率和反向率的测试方法，常用于网页优化及时常营销

   -  A/B test
      核心在于：对同一个\ ``要素``\ 有两个版本(A/B)，并且有度量哪个更成功的指标的情况下，将A/B两个版本同时做实验，然后根据度量结果决定哪个版本更好，从而决定在生产中真正使用哪个版本。

.. _header-n12:

为什么需要A/B test？
--------------------

产品的改变并不总是意味着进步和提高，有时候是无法人为评判多种设计方案中哪一种更优秀，这时利用A/B
test可以回答两个问题：

1. 哪个方案好？

2. 比较结果的可信度是多少？

A/B test
结果是基于用户得到的结果，用数据说话，而不是凭空想象去为用户代言，并且通过一定的数学分析给出结果的可信度。

A/B test 需要几个前提：

1. 多个方案并行测试；

2. 每个方案只有一个变量不同；

3. 能够以某种规则优胜劣汰；

其中：第2点暗示了A/B测试的应用范围：A/B测试必须是单变量，但有的时候，我们并不追求知道某个细节对方案的影响，而只想知道方案的整体效果如何，那么可以适当增加变量，当然测试方案有非常大的差异时一般不太适合做A/B测试，因为它们的
变量太多了，变量之间会有很多的干扰，所以很难通过A/B测试的方法找出各个变量对结果的影响程度。

在满足上述前提时，便可以做A/B test了。

.. _header-n31:

如何做A/B test？
----------------

一个完整的A/B test主要包括以下几部分：

1. 确定测试目标。即建立实验方案好坏的评估标准；

2. 设计分流方案；

3. 实验方案的部署；

4. 数据收集及统计

5. 结果分析，得出结论；

需要做/可以做的事：

1. 你需要需要知道在放弃之前需要进行多长时间的测试。过早或过晚放弃都是不对的；

2. 注意给相同访客呈现出相同版本，特别是一些价格什么敏感信息。（可以用cookie之类的追踪用户）；

3. 在整个网站中保持A/B测试的一致性，不要在X页面显示A中测试元素，而在Y页面显示B种测试元素。

4. 做很多的A/B测试（为了达到既定的目标）；

不需要做/不可以做的事:

1. 只有在测试了你能控制A/B两种版本之后，才开始你的测试；不要一段时间测试A版本，一段时间测试B版本，而是应该同时进行，将流量分散为A/B两类；

2. 不要过早地下结论，需要事先预估一个A/B测试的周期；

3. 不要令常来的访客惊讶（或困惑），如果是测试一个核心功能，最好只对新用户进行测试；

4. 不要让个人的喜好影响测试的结果，因为不一定是看起来更合理（或更漂亮）的版本会获得A/B测试的胜利，结果是什么就是什么，数据说话，保持客观；

测试工具：

-  Web

   -  Google Website Optimilzer

   -  Visual Website Optimilzer

   -  Vertster

   -  Preess9 A/B Testing Joomla Plugin

   -  Amazon Mechanical Turk

   -  Split Test Calculator

   -  ABtests.com

-  Mobile App

   -  clutch.io

   -  pathmapp

.. _header-n91:

为什么需要对A/B test的结果做分析？
----------------------------------

.. _header-n93:

Z检验计算胜出概率
~~~~~~~~~~~~~~~~~

   并不是所有的实验都能做到样本足够大、区分度足够高，所以需要使用统计假设检验来验证实验的结果；

.. _header-n96:

例子：
^^^^^^

以\ ``转化率``\ 为例，运行A/B test一周，分别对1000个样本进行了测试。

-  A版本的转化率为\ :math:`7.5\%`

-  B版本的转化率为\ :math:`9\%`

对于这个实验结果，有两个疑问：

-  能否肯定B版本比A版本好？

-  有多大的可能是因为一些随机的因素导致了这样的差别？

假设检验能够有效地回答这个问题。首先设定\ ``零假设``\ ：

:math:`H0: B版本在转化率效果不会比A版本好`

然后，通过证据(实验观察到的样本)来推翻这个假设。如果样本足以推翻上面的零假设，那么可以认为实验完成了，可以的到的结论为：B版本在转化率效果比A版本好；否则，需要继续实验来得到更多的实验观测数据样本来进行推断，或者，干脆就接受这个假设并舍弃B版本，即认为B版本在转化率方面没有A版本效果好。

将上面的假设检验抽象为统计学理论：

-  假设随机变量\ :math:`X = P(B)-P(A)`\ 是两个版本实际转化率的差异度，其中，\ :math:`P(B)`\ 是B的转化率，\ :math:`P(A)`\ 是A的转化率。

-  定义假设：\ :math:`B版本不比A版本效果好`

   -  原假设：\ :math:`H0: P(B)-P(A)\leq0`

   -  备择假设：\ :math:`H1: P(B)-P(A)>0`

-  一个用户，要么注册，要么不注册，所以A和B均满足二项分布，即

   -  :math:`A \sim b(N, P(A))`

   -  :math:`B \sim b(N, P(B))`, :math:`N`\ 是样本数量；

-  根据中心极限定理，A和B可以近似为正态分布，那么，随机变量\ :math:`X = P(B)-P(A)`\ 也服从正太分布:

   -  :math:`X \sim N(0, \frac{P(B)(1-P(B))}{N} + \frac{P(A)(1-P(A))}{N})`,
      其中分布的期望为\ :math:`0`\ ，因为原假设的期望是B版本和A版本没有显著的差异，即\ :math:`E(X)=0`

-  对\ :math:`X`\ 的分布进行标准化，然后选择\ :math:`5\%`\ 的区间作为拒绝域，即如果\ :math:`X`\ 标准化后的值落在了标准正态分布的最右端\ :math:`5\%`\ 的面积里，那么可以具有很强的信心(\ :math:`1-5\%=95\%`)拒绝原假设\ :math:`H0`\ ，即得到结论B版本比A版本效果好。

-  假设\ :math:`X标准化后的随机变量为`\ Z$，

.. _header-n141:

区间估计计算范围
~~~~~~~~~~~~~~~~

.. _header-n143:

A/B test相关的统计学理论有哪些？
--------------------------------

.. _header-n144:

正太分布
~~~~~~~~

.. _header-n145:

中心极限定理
~~~~~~~~~~~~

.. _header-n146:

区间估计
~~~~~~~~

.. _header-n148:

统计检验
~~~~~~~~

.. _header-n150:

Z检验
~~~~~

.. _header-n152:

P value
~~~~~~~

.. _header-n154:

标准正态分布表Z值查询方法
~~~~~~~~~~~~~~~~~~~~~~~~~
